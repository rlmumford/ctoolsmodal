<?php/** * Renderer class for all In-Place Editor (IPE) behavior. */class panels_renderer_cns_ipe extends panels_renderer_ipe {  /**   * Overwrote get_url method for content-cns-content   */    function get_url() {    $args = func_get_args();        $command = array_shift($args);    if ($command == 'select-content') {      $command = 'select-cns-content';    }        $url = 'panels/ajax/' . $this->plugin['name'] . '/' . $command . '/' . $this->display->cache_key;    if ($args) {      $url .= '/' . implode('/', $args);    }        return $url;  }  /**   * AJAX comman to present a dialog with our crazy shtuff   */  function ajax_select_cns_content($region = NULL, $category = NULL) {    if (!array_key_exists($region, $this->plugins['layout']['regions'])) {      ctools_modal_render(t('Error'), t('Invalid input'));    }    $title = t('Add content to !s', array('!s' => $this->plugins['layout']['regions'][$region]));    $output = theme('cns_panels_add_content_modal', array('renderer' => $this, 'categories' => $categories, 'category' => $category, 'region' => $region));    $this->commands[] = ctools_modal_command_display($title, $output);  }  }
